@page
@model Kaiyuanshe.OpenHackathon.Server.Pages.IndexModel
@{
    Layout = "_Layout";
}

<h3>Open Hackathon Rest API V2</h3>

<h3>Rest API Overview</h3>
<div>A swagger 2.0 compliant Rest API server for open hackathon.</div>

<h3>Authentication</h3>
<div>
    Some APIs allow anonymous access, some others require a valid <code>token</code>. Open hackathon
    platform has integrated with <a href="https://authing.cn/" target="_blank">Authing</a>. Any web app which onboarded to Authing
    is able to get a valid token. A typical flow:
    <ul>
        <li>
            In you web app, follow Authing documents to login user. Can use any Authing-supported login method including password-based and social login(github, WeChat and so on).
            All login-related configs are configured in Authing or social login provider like github.
        </li>
        <li>After a successful login, post the response data(token is included) returend by Authing to api <code>/v2/login</code>. This step MIGHT be skipped in future.</li>
        <li>
            Afterwards, you can call other APIs with an <code>Authorization</code> header. The header value is of format <code>token TOKENVALUE</code>. 
            Notice that if the token expires, users need to login again to get a new token.
            <code>Headers["Authorization"]="token TOKENVALUE"</code>
        </li>
    </ul>
</div>

<h3>Authorization</h3>
<div>
    User is identified using the access <code>token</code>. Access is determined based on the user/token. Quick
    tips about access:
    <ul>
        <li>
            View the <a href="/swagger" target="_blank">API Spec</a>, if the summary of
            an API contains <b>(Auth)</b> or <b>(Auth Policies:xxx)</b>, <code>Authorization</code> header is required.
            Otherwise, the API can be called anonymously.
        </li>
        <li>If <b>Policies</b> is empty, it means any login user is allowed to access the API.</li>
        <li>
            If <b>Policies</b> is NOT empty, it means only users who have proper access can access the API.
            The policy name is quite descriptive. e.g. <b>PlatformAdministrator</b> means only admins of the hackathon platform are allowed, so only several selected accounts are allowd.
            Another typical example, <b>HackathonAdminitrator</b>, only admins of a hackathon are allowed.
        </li>
    </ul>
</div>

<h3>Multilingual Support</h3>
<div>
    Multiple languages support is still in progress. We are aiming to support 2 languanges: English(<b>default</b>) and Chinese. Scopes:
    <ul>
        <li>
            Web Pages: <b>Not supported</b>. This includes the home page, Swagger UI etc.
        </li>
        <li>
            User Input: <b>Not supported</b>. Any content from users is not supported. e.g. the display name and content of a hackathon.
        </li>
        <li>
            Error Response: <b>Supported</b>.
        </li>
        <li>
            Content from partners: <b>Not supported</b>. For instance, user info from Github/Authing cannot be localized.
        </li>
    </ul>
    <div>
        To get response in a different language, add Http Header <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language" target="_blank">Accept-Language</a>
        to your request:
        <code>Headers["Accept-Language"]="zh-CN"</code>
    </div>
</div>

<h3>Error Response</h3>
<div>
    Http response with a code >= 400 is considered Error. A <a href="https://tools.ietf.org/html/rfc7807" target="_blank">RFC7807</a>-compliant standard
    response body is retured. The response is of type <a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.problemdetails" target="_blank">ProblemDetails</a>(code other than 400)
    or <a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.validationproblemdetails" target="_blank">ValidationProblemDetails</a>(http code 400). Example:
       <pre>
{
    "type": "https://httpstatuses.com/400",
    "title": "One or more validation errors occurred.",
    "status": 400,
    "traceId": "|790eea2d-4a0d4972a27712a5.",
    "errors": {
        "maxEnrollment": [
            "The field maxEnrollment must be between 1 and 100_000."
        ]
    }
}
</pre>
</div>
